<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="mainStyle.css">
  <title>Heart Cinema</title>
</head>

<body>

  <a href="main.html"><img id="title" src="media/text-1636881418747.jpg"></a>
  <nav role="navigation">
    <ul id="main_menu">
      <li><a href="main.html">홈</a></li>
      <li><a href="introduce.html">극장 소개</a>
      </li>
      <li><a href="#">영화 정보</a>
        <ul id="sub_menu">
          <li><a href="currentMovie.html" aria-label="subemnu">현재 상영작</a></li>
          <li><a href="futureMovie.html" aria-label="subemnu">예정 상영작</a></li>
        </ul>
      </li>
      <li><a href="#">예매</a>
        <ul id="sub_menu">
          <li><a href="reserve.html" aria-label="subemnu">예매</a></li>
          <li><a href="changeT.html" aria-label="subemnu">예매 확인/취소</a></li>
        </ul>
      </li>
      <li><a href="#">기타</a>
        <ul id="sub_menu">
          <li><a href="contact.html" aria-label="subemnu">연락처</a></li>
        </ul>
      </li>
    </ul>
  </nav>
  <div class="black_box">
    <div id="slide">
      <ul class="cnt">
        <li><img src="media/Dune_now.jpg"></li>
        <li><img src="media/Eternals_now.jpg"></li>
        <li><img src="media/Tomb of the River_now.jpg"></li>
        <li><img src="media/Venom_now.jpg"></li>
      </ul>
      <div class="btn">
        <div class="prev"></div>
        <div class="next"></div>
      </div>
      <div class="auto">
        <div class="stop"></div>
        <div class="play"></div>
      </div>
    </div>
  </div>
  <script>
    var MOVEING_PX = 4;
    var  AUTO_TIME = 2000;
    var  slide = document.getElementById("slide");
    var  indi = document.createElement("ul");
    var  slideCnt = slide.getElementsByClassName("cnt");
    var  slideCntItem = slideCnt[0].getElementsByTagName("li");
    var  playBtn = slide.getElementsByClassName("play");
    var  stopBtn = slide.getElementsByClassName("stop");
    var  playSet = null;
    var  before = 0;
    var  after = 0;
    var  moveIng = false;

    slideCntItem[0].style.left = 0;
    playBtn[0].style.display = "block";
    var indi = document.createElement("ul");
    for (var i = 0; i < slideCntItem.length; i++) {
      indi.innerHTML += "<li></li>";
    }
    indi.classList.add("indi");
    indi.children[0].classList.add("on");
    slide.append(indi);
    for (var j = 0; j < indi.children.length; j++) {
      indiClick(j);
    }
    if (!moveIng) {
      after++;
      if (after >= slideCntItem.length) {
        after = 0;
      }
      move(after, before, "next");
      before = after;
    }
    if (!moveIng) {
      after--;
      if (after < 0) {
        after = slideCntItem.length - 1;
      }
      move(after, before);
      before = after;
    }
    playBtn[0].style.display = "none";
    stopBtn[0].style.display = "block";
    playSet = setInterval(function () {
      if (!moveIng) {
        after++;
        if (after >= slideCntItem.length) {
          after = 0;
        }
        move(after, before, "next");
        before = after;
      }
    }, AUTO_TIME);

    function indiClick(target) {
      indi.children[target].addEventListener("click", function () {
        if (!moveIng) {
          after = target;
          if (after > before) {
            move(after, before, "next");
          } else if (after < before) {
            move(after, before);
          }
          before = after;
        }
      });
    }

    function move(after, before, type) {
      var nextX = type === "next" ? slide.offsetWidth : slide.offsetWidth * -1,
        prevX = 0,
        set = null;
      set = setInterval(function () {
        moveIng = true;
        if (type === "next") {
          nextX -= MOVEING_PX;
          slideCntItem[after].style.left = nextX + "px";
          if (nextX <= 0) {
            clearInterval(set);
            nextX = slide.offsetWidth;
            moveIng = false;
          }
          prevX -= MOVEING_PX;
        } else {
          nextX += MOVEING_PX;
          slideCntItem[after].style.left = nextX + "px";
          if (nextX >= 0) {
            clearInterval(set);
            nextX = slide.offsetWidth * -1;
            moveIng = false;
          }
          prevX += MOVEING_PX;
        }
        slideCntItem[before].style.left = prevX + "px";
      });
      indi.children[before].classList.remove("on");
      indi.children[after].classList.add("on");
    }
  </script>
</body>

</html>