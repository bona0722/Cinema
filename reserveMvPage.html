<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="reserveMvP1Style.css">
  <title>영화 예매</title>
</head>


<body>
  <div id="screen">SCREEN</div>
  <span class="circle" id="pCircle">가능 좌석</span>
  <span class="circle" id="imCircle">불가능 좌석</span>
  <table border="1">
    <tr>
      <td type="button" id="1-1" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="1-2" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="1-3" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="1-4" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="1-5" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
    </tr>
    <tr>
      <td id="2-1" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-2" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-3" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-4" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-5" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
    </tr>
    <tr>
      <td id="2-1" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-2" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-3" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-4" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
      <td id="2-5" type="button" onclick="check_sheet(id);" style="cursor: pointer;"></td>
    </tr>
  </table>
  <form>
    <br>
    <button type="button" onclick="slidePage();" id="slideButton" width="420px" style="cursor: pointer;">
      다음 단계
    </button>
  </form>
  <script>
    var mvName = new URLSearchParams(location.search).get("arg1");
    var rating = new URLSearchParams(location.search).get("arg2");
    var theater = new URLSearchParams(location.search).get("arg3");
    var mvTime = new URLSearchParams(location.search).get("arg4");
    var ss = window.sessionStorage; //세션 스토리지

    pageload();

    if (!ss) {
      alert("세션 스토리지를 지원하지 않습니다.");
    }

    function pageload() {
      ss.clear();
    }

    function addItem(id) { // 로컬 스토리지에 저장
      ss.setItem(id, "추가된 좌석");
    }

    function deleteItem(id) { // 로컬 스토리지에서 삭제
      ss.removeItem(id);
    }
    var count = 0;
    var tblData = null;
    var sheetId = null;

    function check_sheet(data) {
      sheetId = document.getElementById(data).getAttribute("id");
      tblData = document.getElementById(data);
      if (count % 2 == 0 & document.getElementById(data).style.backgroundColor != "#ff6464") {
        document.getElementById(data).style.backgroundColor = "#b4f191";
        count += 1;
        addItem(sheetId);
      } else if (count % 2 == 1 & document.getElementById(data).style.backgroundColor != "#ff6464") {
        document.getElementById(data).style.backgroundColor = "";
        count += 1;
        deleteItem(sheetId);
      }
    }

    function slidePage() {
      args = "arg1=" + mvName + "&arg2=" + rating + "&arg3=" + theater + "&arg4=" + mvTime;
      window.location.href = "reserveMvPage2.html?" + args;
    }
  </script>
</body>

</html>